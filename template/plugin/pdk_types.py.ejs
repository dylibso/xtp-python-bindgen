# THIS FILE WAS GENERATED BY `xtp-python-bindgen`. DO NOT EDIT.

from __future__ import annotations
from enum import Enum # noqa: F401
from typing import Optional, List # noqa: F401
from datetime import datetime # noqa: F401
from dataclasses import dataclass # noqa: F401
from dataclass_wizard import JSONWizard # noqa: F401
from dataclass_wizard.type_def import JSONObject
from base64 import b64encode, b64decode

<% Object.values(schema.schemas).forEach(schema => { %>
    <% if (schema.enum) { %>
class <%- pythonTypeName(schema.name) %>(Enum):
<% schema.enum.forEach(variant => { -%>
  <%- pythonTypeName(variant) %> = "<%- variant %>"
<% }) %>
    <% } else { %>
@dataclass
class <%- pythonTypeName(schema.name) %>(JSONWizard):
<% schema.properties.forEach(p => { -%>
<% if (!p.nullable && p.required) {%>
  <% if (p.description) { -%>
    # <%- formatCommentBlock(p.description, "# ") %>
  <% } -%>
  <%- p.name %>: <%- toPythonType(p, p.required) %>
<% } %>
<% }) %>

<% schema.properties.forEach(p => { -%>
<% if (p.nullable && p.required) {%>
  <% if (p.description) { -%>
    # <%- formatCommentBlock(p.description, "# ") %>
  <% } -%>
  <%- p.name %>: <%- toPythonType(p, p.required) %>
<% } %>
<% }) %>

<% schema.properties.forEach(p => { -%>
<% if (!p.required) {%>
  <% if (p.description) { -%>
    # <%- formatCommentBlock(p.description, "# ") %>
  <% } -%>
  <%- p.name %>: <%- toPythonType(p, p.required) %> = None
<% } %>
<% }) %>

    @classmethod
    def _pre_from_dict(cls, o: JSONObject) -> JSONObject:
<% schema.properties.forEach(p => { -%>
<% if (p.xtpType.kind === 'buffer') {%>
        o['<%- p.name %>'] = b64decode(o['<%- p.name %>'])
<% } -%>
<% }) -%>
        return o

    def _pre_dict(self):
<% schema.properties.forEach(p => { -%>
<% if (p.xtpType.kind === 'buffer') {%>
        self.<%- p.name %> = b64encode(self.<%- p.name %>).decode("utf-8")
<% } -%>
<% }) -%>
        return

<% } %>
<% }); %>

